{
	"name": "hw4-devcontainer",
	"image": "mcr.microsoft.com/devcontainers/python:3.11-bookworm",
	"features": {
		"ghcr.io/dhoeric/features/google-cloud-cli:1": {},
		"ghcr.io/devcontainers/features/common-utils:2": {
			"installZsh": true,
			"configureZshAsDefaultShell": true,
			"installOhMyZsh": true,
			"installOhMyZshConfig": true,
			"upgradePackages": true,
			"installSsl": true,
			"username": "devcontainer",
			"userUid": "automatic",
			"userGid": "automatic"
		},
		"ghcr.io/devcontainers/features/docker-in-docker:2": {
			"moby": true,
			"azureDnsAutoDetection": true,
			"installDockerBuildx": true,
			"version": "latest",
			"dockerDashComposeVersion": "v2"
		},
		"ghcr.io/devcontainers/features/git-lfs:1": {
			"autoPull": true,
			"version": "latest"
		},
		"ghcr.io/devcontainer-community/devcontainer-features/astral.sh-uv:1": {
			"shellautocompletion": true,
			"version": "latest"
		}
	},
	"postCreateCommand": "uv sync --frozen && gcloud --version",
	"customizations": {
		"vscode": {
			"extensions": [
				"ms-python.python", // Required for dbt Power User to find Python
				"astral-sh.uv", // Native uv support
				"innoverio.vscode-dbt-power-user", // The "Power User for dbt" Extension ID
				"charliermarsh.ruff", // Highly recommended for uv users/Python linting
				"mechatroner.rainbow-csv" // Optional but helpful for CSV files
			],
			"settings": {
				"python.defaultInterpreterPath": "${workspaceFolder}/.venv/bin/python",
				// Forces dbt Power User to use the same venv
				"dbt.dbtPythonPathOverride": "${workspaceFolder}/.venv/bin/python",
				// Optional: Ensure the terminal uses the venv by default
				"python.terminal.activateEnvInSelectedTerminal": true,
				"dbt.dbtIntegration": "core",
				"dbt.profilesDir": "${workspaceFolder}"
			}
		}
	}
}